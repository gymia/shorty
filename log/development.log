  [1m[35m (16.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying PRIMARY KEY)[0m
  [1m[35m (8.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7835134738918114950);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUrls (20160710174355)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "urls" ("id" serial primary key, "url" character varying, "short_code" character varying, "start_date" timestamp, "last_seen_date" timestamp, "redirect_count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20160710174355"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", 2016-07-10 17:44:37 UTC], ["updated_at", 2016-07-10 17:44:37 UTC]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(7835134738918114950)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (4.4ms)[0m  [1m[34mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'urls'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7835134738918114950);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateFriendlyIdSlugs (20160710190137)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
DEPRECATION WARNING: Directly inheriting from ActiveRecord::Migration is deprecated. Please specify the Rails release the migration was written for:

  class CreateFriendlyIdSlugs < ActiveRecord::Migration[4.2] (called from load at /home/tiago/.rbenv/versions/2.3.1/bin/rake:23)
  [1m[35m (12.7ms)[0m  [1m[35mCREATE TABLE "friendly_id_slugs" ("id" serial primary key, "slug" character varying NOT NULL, "sluggable_id" integer NOT NULL, "sluggable_type" character varying(50), "scope" character varying, "created_at" timestamp)[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE  INDEX  "index_friendly_id_slugs_on_sluggable_id" ON "friendly_id_slugs"  ("sluggable_id")[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE  INDEX  "index_friendly_id_slugs_on_slug_and_sluggable_type" ON "friendly_id_slugs"  ("slug", "sluggable_type")[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope" ON "friendly_id_slugs"  ("slug", "sluggable_type", "scope")[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE  INDEX  "index_friendly_id_slugs_on_sluggable_type" ON "friendly_id_slugs"  ("sluggable_type")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20160710190137"]]
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(7835134738918114950)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (4.9ms)[0m  [1m[34mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'friendly_id_slugs'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.4ms)[0m  [1m[34mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'urls'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUrl Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "urls" WHERE ("urls"."id" IS NOT NULL) AND "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7835134738918114950);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddSlugToUrls (20160710191748)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "urls" ADD "slug" character varying[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20160710191748"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7835134738918114950)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (3.0ms)[0m  [1m[34mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'friendly_id_slugs'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'urls'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUrl Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "urls" WHERE ("urls"."id" IS NOT NULL) AND "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "urls" ("url", "short_code", "start_date", "created_at", "updated_at", "slug") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["url", "www.google.com"], ["short_code", "asdfasdf"], ["start_date", 2016-07-10 19:18:20 UTC], ["created_at", 2016-07-10 19:18:20 UTC], ["updated_at", 2016-07-10 19:18:20 UTC], ["slug", "asdfasdf"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for 127.0.0.1 at 2016-07-10 16:19:42 -0300
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Rails::WelcomeController#index as HTML
  Parameters: {"internal"=>true}
  Rendering /home/tiago/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/railties-5.0.0/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/tiago/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/railties-5.0.0/lib/rails/templates/rails/welcome/index.html.erb (3.5ms)
Completed 200 OK in 8ms (Views: 6.7ms | ActiveRecord: 0.0ms)


Started GET "/favicon.ico" for 127.0.0.1 at 2016-07-10 16:19:43 -0300
Processing by UrlsController#shortcode as 
  Parameters: {"id"=>"favicon"}
  [1m[36mUrl Load (0.6ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "favicon"], ["LIMIT", 1]]
Completed 404 Not Found in 14ms (ActiveRecord: 3.7ms)


  
ActiveRecord::RecordNotFound (can't find record with friendly id: "favicon"):
  
app/controllers/urls_controller.rb:24:in `find_url'
Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:19:47 -0300
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.5ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Completed 204 No Content in 16ms (ActiveRecord: 0.5ms)


Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:20:12 -0300
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.5ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Completed 204 No Content in 213951ms (ActiveRecord: 5.9ms)


Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:23:58 -0300
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.5ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Redirected to http://localhost:3000www.google.com
Completed 302 Found in 30ms (ActiveRecord: 5.5ms)


Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:24:19 -0300
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.4ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Redirected to http://localhost:3000www.google.com
Completed 302 Found in 15595ms (ActiveRecord: 3.7ms)


Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:24:35 -0300
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (1.5ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Redirected to http://localhost:3000www.google.com
Completed 302 Found in 1289ms (ActiveRecord: 1.5ms)


Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:25:38 -0300
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.4ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 44ms (ActiveRecord: 3.7ms)


  
NoMethodError (undefined method `redirect_to_url' for #<UrlsController:0x00555cbc727b80>
Did you mean?  redirect_to):
  
app/controllers/urls_controller.rb:16:in `shortcode'
Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:25:49 -0300
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.4ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Redirected to http://localhost:3000www.google.com
Completed 302 Found in 21ms (ActiveRecord: 0.7ms)


Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:26:03 -0300
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.7ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Redirected to http://localhost:3000www.google.com
Completed 302 Found in 3ms (ActiveRecord: 0.7ms)


Started GET "/" for 127.0.0.1 at 2016-07-10 16:26:06 -0300
Processing by Rails::WelcomeController#index as HTML
  Parameters: {"internal"=>true}
  Rendering /home/tiago/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/railties-5.0.0/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/tiago/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/railties-5.0.0/lib/rails/templates/rails/welcome/index.html.erb (5.6ms)
Completed 200 OK in 9ms (Views: 7.6ms | ActiveRecord: 0.0ms)


Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:26:53 -0300
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.6ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Redirected to http://www.rubyonrails.org
Completed 302 Found in 19ms (ActiveRecord: 0.6ms)


  [1m[36mUrl Load (0.5ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" ORDER BY "urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "urls" SET "url" = $1, "updated_at" = $2 WHERE "urls"."id" = $3[0m  [["url", "https://www.google.com/"], ["updated_at", 2016-07-10 19:27:48 UTC], ["id", 1]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:28:07 -0300
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.4ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Redirected to https://www.google.com/
Completed 302 Found in 12ms (ActiveRecord: 0.4ms)


Started GET "/asdf" for 127.0.0.1 at 2016-07-10 16:28:47 -0300
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdf"}
  [1m[36mUrl Load (0.6ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdf"], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (ActiveRecord: 0.6ms)


  
ActiveRecord::RecordNotFound (can't find record with friendly id: "asdf"):
  
app/controllers/urls_controller.rb:25:in `find_url'
Started GET "/asdf" for 127.0.0.1 at 2016-07-10 16:30:57 -0300
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdf"}
  [1m[36mUrl Load (0.8ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdf"], ["LIMIT", 1]]
Filter chain halted as :find_url rendered or redirected
Completed 404 Not Found in 18ms (Views: 0.3ms | ActiveRecord: 4.6ms)


Started GET "/asdfadf" for 127.0.0.1 at 2016-07-10 16:31:02 -0300
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdfadf"}
  [1m[36mUrl Load (0.6ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfadf"], ["LIMIT", 1]]
Filter chain halted as :find_url rendered or redirected
Completed 404 Not Found in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)


Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:31:05 -0300
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.7ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Redirected to https://www.google.com/
Completed 302 Found in 19ms (ActiveRecord: 0.7ms)


Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:31:05 -0300
Processing by UrlsController#shortcode as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.4ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Redirected to https://www.google.com/
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)


Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:35:34 -0300
Processing by UrlsController#short_code as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.4ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "urls" SET "redirect_count" = $1, "last_seen_date" = $2, "updated_at" = $3 WHERE "urls"."id" = $4[0m  [["redirect_count", 1], ["last_seen_date", 2016-07-10 19:35:34 UTC], ["updated_at", 2016-07-10 19:35:34 UTC], ["id", 1]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to https://www.google.com/
Completed 302 Found in 26ms (ActiveRecord: 7.8ms)


Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:35:34 -0300
Processing by UrlsController#short_code as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.4ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "urls" SET "redirect_count" = $1, "last_seen_date" = $2, "updated_at" = $3 WHERE "urls"."id" = $4[0m  [["redirect_count", 2], ["last_seen_date", 2016-07-10 19:35:34 UTC], ["updated_at", 2016-07-10 19:35:34 UTC], ["id", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to https://www.google.com/
Completed 302 Found in 6ms (ActiveRecord: 1.9ms)


Started GET "/asdfasdf/stats" for 127.0.0.1 at 2016-07-10 16:41:19 -0300
Processing by UrlsController#stats as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.5ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 20ms (ActiveRecord: 5.6ms)


  
TypeError (no implicit conversion of ActiveSupport::TimeWithZone into String):
  
app/controllers/urls_controller.rb:21:in `parse'
app/controllers/urls_controller.rb:21:in `stats'
Started GET "/asdfasdf/stats" for 127.0.0.1 at 2016-07-10 16:44:21 -0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UrlsController#stats as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.7ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Completed 200 OK in 22ms (Views: 0.3ms | ActiveRecord: 4.6ms)


Started GET "/asdfasdf/stats" for 127.0.0.1 at 2016-07-10 16:45:36 -0300
Processing by UrlsController#stats as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.6ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Completed 200 OK in 24ms (Views: 0.4ms | ActiveRecord: 5.5ms)


Started GET "/asdfasdf" for 127.0.0.1 at 2016-07-10 16:45:53 -0300
Processing by UrlsController#short_code as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.4ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "urls" SET "redirect_count" = $1, "last_seen_date" = $2, "updated_at" = $3 WHERE "urls"."id" = $4[0m  [["redirect_count", 3], ["last_seen_date", 2016-07-10 19:45:53 UTC], ["updated_at", 2016-07-10 19:45:53 UTC], ["id", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to https://www.google.com/
Completed 302 Found in 8ms (ActiveRecord: 1.7ms)


Started GET "/asdfasdf/stats" for 127.0.0.1 at 2016-07-10 16:45:58 -0300
Processing by UrlsController#stats as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (0.6ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.6ms)


Started GET "/asdfasdf/stats" for 127.0.0.1 at 2016-07-10 16:49:43 -0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UrlsController#stats as HTML
  Parameters: {"id"=>"asdfasdf"}
  [1m[36mUrl Load (1.5ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 ORDER BY "urls"."id" ASC LIMIT $2[0m  [["slug", "asdfasdf"], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 7.2ms)


Started GET "/asdfasadf/stats" for 127.0.0.1 at 2016-07-10 16:49:46 -0300
Processing by UrlsController#stats as HTML
  Parameters: {"id"=>"asdfasadf"}
  [1m[36mUrl Load (0.7ms)[0m  [1m[34mSELECT  "urls".* FROM "urls" WHERE "urls"."slug" = $1 ORDER BY "urls"."id" ASC LIMIT $2[0m  [["slug", "asdfasadf"], ["LIMIT", 1]]
Filter chain halted as :find_url rendered or redirected
Completed 404 Not Found in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7835134738918114950);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(7835134738918114950)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'friendly_id_slugs'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'urls'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", :environment]]
  [1m[35m (112.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "shorty_test"[0m
  [1m[35m (254.6ms)[0m  [1m[35mCREATE DATABASE "shorty_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (12.4ms)[0m  [1m[35mCREATE TABLE "friendly_id_slugs" ("id" serial primary key, "slug" character varying NOT NULL, "sluggable_id" integer NOT NULL, "sluggable_type" character varying(50), "scope" character varying, "created_at" timestamp)[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope" ON "friendly_id_slugs" USING btree ("slug", "sluggable_type", "scope")[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE  INDEX  "index_friendly_id_slugs_on_slug_and_sluggable_type" ON "friendly_id_slugs" USING btree ("slug", "sluggable_type")[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE  INDEX  "index_friendly_id_slugs_on_sluggable_id" ON "friendly_id_slugs" USING btree ("sluggable_id")[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE  INDEX  "index_friendly_id_slugs_on_sluggable_type" ON "friendly_id_slugs" USING btree ("sluggable_type")[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE TABLE "urls" ("id" serial primary key, "url" character varying, "short_code" character varying, "start_date" timestamp, "last_seen_date" timestamp, "redirect_count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "slug" character varying)[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying PRIMARY KEY)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES ('20160710191748')[0m
  [1m[35m (1.5ms)[0m  [1m[32mINSERT INTO schema_migrations (version) VALUES ('20160710190137'), ('20160710174355');

[0m
  [1m[35m (9.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", 2016-07-10 20:43:11 UTC], ["updated_at", 2016-07-10 20:43:11 UTC]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
